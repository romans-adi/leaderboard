(()=>{"use strict";const e=(e,t)=>{t.innerHTML="",e.forEach((e=>{const o=document.createElement("li");o.classList.add("py-2","px-4"),o.append(document.createTextNode(`${e.user} : ${e.score}`)),t.append(o)}))},t=()=>{const e=localStorage.getItem("scores");return e?JSON.parse(e):[]},o=e=>{const o=t()||[];o.push(e),localStorage.setItem("scores",JSON.stringify(o))},s=async s=>{try{localStorage.removeItem("scores");const r=await fetch("https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/MfoLYZGPReGfyuYdGRJ7/scores/",{headers:{Accept:"application/json","Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch scores from API");{const c=(await r.json()).result.sort(((e,t)=>t.score-e.score));e(c,s),(async()=>{try{const e=await fetch("https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/MfoLYZGPReGfyuYdGRJ7/scores/");if(e.ok){const t=(await e.json()).result;return o(t),t}return t()}catch(e){return t()}})()}}catch(o){const r=t().sort(((e,t)=>t.score-e.score));e(r,s)}},r=document.querySelector("#input-user"),c=document.querySelector("#input-score"),n=document.querySelector(".error-container"),a=(e,t=3e3)=>{n.innerHTML="";const o=document.createElement("span");o.textContent=e,o.classList.add("font-bold","red"),n.appendChild(o),setTimeout((()=>{o.style.opacity="0",o.style.transition="opacity 0.3s",setTimeout((()=>{o.remove()}),500)}),t)},i=document.querySelector("#refresh"),u=document.querySelector("#player-data"),d=document.querySelector(".scoreboard");s(d),i.addEventListener("click",(()=>s(d))),u.addEventListener("submit",(async e=>{e.preventDefault();const t=r.value.trim(),s=parseInt(c.value.trim(),10);if(""===t||Number.isNaN(s))a("Please enter a valid name and score");else try{const e=await fetch("https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/MfoLYZGPReGfyuYdGRJ7/scores/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,score:s})});if(!e.ok){const t=await e.json();throw new Error(`Failed to add score: ${t.error}`)}r.value="",c.value="",o({name:t,score:s})}catch(e){a(`Error adding score: ${e.message}`),o({name:t,score:s})}}))})();